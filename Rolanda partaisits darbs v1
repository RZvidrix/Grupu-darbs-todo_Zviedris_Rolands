<!DOCTYPE html>
<html>
<head>
    <title>Lets go</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body onload="loadData()">
    <div class="container-sm">
        <div class="card" style="width: 18rem;">
            <img src="https://media.istockphoto.com/id/157030584/vector/thumb-up-emoticon.jpg?s=612x612&w=0&k=20&c=GGl4NM_6_BzvJxLSl7uCDF4Vlo_zHGZVmmqOBIewgKg=" class="card-img-top" alt="supposed image">
            <div class="card-body">
                <h3 class="card-title">Mani darbi</h3>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="info">
                    <button class="btn btn-outline-primary" type="button" onclick="add()">Pievienot</button>
                </div>
                <ul id="task-list" class="list-group"></ul>
            </div>
        </div>
    </div>

<script>
    function add(text = "", done = false) {
        const info = document.createElement("li");
        info.className = "list-group-item d-flex align-items-center";

        // Checkbox
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.classList.add("form-check-input", "me-2");
        checkbox.checked = done;

        // Teksts
        const span = document.createElement("span");
        span.textContent = text || document.getElementById("info").value;

        if (done) span.classList.add("text-decoration-line-through");

        // Checkbox klikšķis
        checkbox.onclick = function () {
            span.classList.toggle("text-decoration-line-through");
            saveData();
        };

        // Delete poga
        const del = document.createElement("button");
        del.textContent = "Delete";
        del.classList.add("btn", "btn-danger", "ms-auto");
        del.onclick = function () {
            info.remove();
            saveData();
        };

        info.appendChild(checkbox);
        info.appendChild(span);
        info.appendChild(del);

        document.getElementById("task-list").appendChild(info);
        document.getElementById("info").value = "";

        saveData();
    }

    // Saglabā sarakstu localStorage
    function saveData() {
        const items = [];
        document.querySelectorAll("#task-list li").forEach(li => {
            const text = li.querySelector("span").textContent;
            const done = li.querySelector("input").checked;
            items.push({ text, done });
        });
        localStorage.setItem("tasks", JSON.stringify(items));
    }

    // Ielādē sarakstu no localStorage
    function loadData() {
        const data = JSON.parse(localStorage.getItem("tasks") || "[]");
        data.forEach(item => add(item.text, item.done));
    }
</script>

</body>
</html>
